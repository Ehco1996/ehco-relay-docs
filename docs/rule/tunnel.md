---
title: 隧道转发指南
---

隧道转发在直接转发的基础上提供了更高级的流量转发能力

通过设置入口节点和出口节点，选择不同的隧道协议，以满足不同场景下的需求。

## 创建步骤

1. 登录到 [Ehco-Relay](https://ehco-relay.cc) 管理面板。

2. 在左侧导航栏选择 `隧道转发` 选项。

3. 点击 `新建规则` 按钮，屏幕将显示如下界面：

 <img src="/assets/rule/tunnel/add.png" alt="add" width="500">

4. **选择节点**：用户需要选择两个节点，一个作为**入口节点**，另一个作为**出口节点**。

5. **配置隧道协议** 根据需求选择合适的隧道协议，并完成其他规则信息的填写：

    - `规则名称`：为你的规则起一个名字。
    - `目标地址`：填写目标服务器的地址。可以是 IP 地址或域名。
    - `目标端口`：填写目标服务器的端口。
    - `隧道协议`：选择合适的隧道协议，目前支持 `直接转发`、`WebSocket`、`WebSocket Secure`、`WebSocket Secure(多路复用)`，请根据需求选择。
    - 提示：点击**添加更多目标地址**按钮可以填写多个地址，从而实现负载均衡。

6. 完成其他规则信息的填写并点击 `保存更改` 按钮保存你的设置。

## 连接地址获取

连接地址获取方式与直接转发相同，请参考：[直接转发指南](direct.md)。

示例规则入下图:

<img src="/assets/rule/tunnel/show.png" alt="show" width="250">

## 隧道协议对比

以下表格总结了每种隧道协议的优缺点，帮助您做出更适合您需求的选择：

| 隧道协议                   | 优点                                                       | 缺点                                                           |
| -------------------------- | ---------------------------------------------------------- | -------------------------------------------------------------- |
| 直接转发(多路复用)         | TCP 级别的多路复用，延迟低，适合本身已经有过一层加密的流量 | 开销较大，当链路上对单条 tcp 有 QOS 时，可能会跑不满带宽。     |
| WebSocket                  | 支持在标准 HTTP 端口上通信，易于穿越防火墙。               | 相比直接连接，性能略有损失。                                   |
| WebSocket Secure           | 增加了加密，提高数据传输安全性。                           | 相比 WebSocket，可能会有额外的性能损失。                       |
| WebSocket Secure(多路复用) | 结合了 WebSocket Secure 的安全性和多路复用的高效传输。     | 相比单一协议，实现更复杂，可能需要更多的客户端和服务器端资源。 |

总的来说:

-   如果您需要更高的性能，可以选择 WebSocket
-   如果您需要更高的安全性，可以选择 WebSocket Secure。
-   如果您需要兼顾安全性和低延迟，可以选择 WebSocket Secure(多路复用)。
-   如果您的流量本身已经有过一层加密，且需要低延迟，可以选择直接转发(多路复用)。
-   更多隧道协议正在开发中，敬请期待。

## 没有合适的节点

您可能无法在本站找到满足特定需求的入口/出口节点。为此，我们提供了一种解决方案：您通过 [添加节点](../node/manage.md) 功能，将自己的节点托管到系统中。

请放心，托管节点的过程完全在用户侧进行，我们完全不接触您的机器，我们重视您的数据安全，并承诺不会收集任何敏感数据。

隧道转发为您的数据传输提供了灵活且安全的解决方案，无论是在数据安全性、传输效率，还是网络环境适应性方面，都能满足您的需求。我们鼓励用户探索不同的隧道协议，找到最适合自己场景的配置。
